<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BL Birla Medical Shop</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">BL Birla</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#products">Products</a></li>
          <li class="nav-item"><a class="nav-link" href="#cart">Cart</a></li>
          <li class="login-btn"><a class="nav-link" href="login.html">login</a></li>
          <li class="register-btn"><a class="nav-link" href="register.html">Register</a></li>
          <li class="nav-item"><a class="nav-link" href="#admin">Admin</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <div class="container mt-5 text-center">
    <h1 class="display-5 fw-bold">Welcome to BL Birla Medical Shop</h1>
    <p class="lead">Your trusted place for medicines and health products.</p>
    <a href="#products" class="btn btn-primary btn-lg">Browse Medicines</a>
  </div>

  <!-- PRODUCT SECTION -->
  <div class="container mt-5" id="products">
    <h2 class="mb-4 fw-bold">Medicines</h2>

    <!-- SEARCH BAR -->
    <div class="input-group mb-4">
      <input type="text" id="searchInput" class="form-control" placeholder="Search medicines by name...">
      <button class="btn btn-primary" onclick="searchMedicines()">Search</button>
    </div>

    <div id="productList" class="row g-1 text-center">
      <div class="text-muted">Loading products...</div>
    </div>
  </div>

  <script>
    // Load All Products Initially
    loadProducts();

    function loadProducts() {
      fetch('http://localhost:8080/api/medicines')
        .then(response => response.json())
        .then(data => displayProducts(data))
        .catch(err => {
          document.getElementById('productList').innerHTML =
            '<div class="text-danger">Backend Error: Unable to load products.</div>';
        });
    }

    // Search by name
    function searchMedicines() {
      const name = document.getElementById("searchInput").value.trim();

      if (name === "") {
        loadProducts();  // load all products if search is empty
        return;
      }

      fetch(`http://localhost:8080/api/medicines/search?name=${name}`)
        .then(res => res.json())
        .then(data => displayProducts(data))
        .catch(err => {
          document.getElementById('productList').innerHTML =
            '<div class="text-danger">Error fetching search results.</div>';
        });
    }

    // Render products on screen
    function displayProducts(data) {
      const list = document.getElementById('productList');
      list.innerHTML = '';

      if (!data || data.length === 0) {
        list.innerHTML = '<div class="text-danger">No products found.</div>';
        return;
      }

      data.forEach(p => {
        list.innerHTML += `
    <ul class="list-group mb-2">
      <li class="list-group-item d-flex justify-content-between align-items-center">

        <div>
          <strong>${p.name}</strong> <br>
        </div>

        <div>
          <span class="fw-bold">₹${p.wholesalePrice}</span>
          <button class="btn btn-sm btn-primary ms-3"
                  onclick='addToCart(${JSON.stringify(p)})'>
            Add to Cart
          </button>
        </div>

      </li>
    </ul>
  `;
      });

    }
    /*
        // Simple cart function
        let cart = [];
    
        function addToCart(product) {
          cart.push(product);
          document.getElementById('cart').innerHTML = `
          <h2 class="fw-bold mb-3">Cart</h2>
          <div class="alert alert-success">Added to cart: ${product.name}</div>`;
        }
      */
  </script>


  <!-- CART SECTION 
  <div class="container mt-5" id="cart">
    <h2 class="fw-bold mb-3">Cart</h2>
    <div class="alert alert-info">Your cart is empty.</div>
  </div>

  -- ADMIN SECTION 
  <div class="container mt-5 mb-5" id="admin">
    <h2 class="fw-bold mb-3">Admin Dashboard</h2>
    <div class="card p-3">
      <h5 style="text-align: center; color: red;">This is a Demo Dashborad! full admin Dashboard will be completed in
        next phase</h5>
      <h5>Users</h5>
      <ul class="list-group">
        <li class="list-group-item">Admin User — admin@gmail.com</li>
        <li class="list-group-item">Staff User — staff@gmail.com</li>
      </ul>
    </div>
  </div>
-->
  <div>
    <h3 style=" text-align: center; color: green;">All other features will be added in next phase</h3>
  </div>

</body>

</html>